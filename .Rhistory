,'tinytex','data.table','runner', 'reshape2', 'tidyquant', 'SPEI', 'ts')
t <- ym(ts.fd$time)
time.spi <- seq(from = as.Date("1996-01"), by = '1 month', length.out = 228)
time.spi <- seq(from = as.Date("1996-01", "%Y-%m"), by = '1 month', length.out = 228)
t <- (ts.fd$time)
t
t <- as.data.frame(ts.fd$time)
t
t1 <- substr(t, 1, 4)
t1
t
head(t)
t1 <- substr(t, 1, 4)
t1
t <- as.data.frame(as.string( ts.fd$time))
t <- as.data.frame(as.factor(ts.fd$time))
head(t)
t1 <- substr(t, 1, 4)
t1
t1 <- substr(t, 0, 4)
t1
t1 <- substr(t, 0, 10)
t1
t1 <- substr(t, 0, 100)
t1
t <- as.data.frame(as.character(ts.fd$time))
head(t)
t1 <- substr(t, 0, 100)
t1
t1 <- substr(t, 1, 7)
t1
t1 <- substr(t,3, 7)
t1
t1 <- substr(t,5, 9)
t1
t1 <- substr(t,4, 9)
t1
t1 <- substr(t,4, 10)
t1
1:nrow(ts.fd)
i = 1
substr(ts.fd$time[i],4, 10)
substr(ts.fd$time[i],1, 7)
ubstr(ts.fd$time,1, 7)
ts.fd$month <-  substr(ts.fd$time,1, 7)
ts.fd
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
library(expss)
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd
ts.spi
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd)
head(ts.fd,20)
ts.fd <- ts.fd[,c(3,1,4)]
ts.fd
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
library(expss)
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd,20)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
library(expss)
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd,20)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
ts.fd
ts.fd <- ts(ts.comp[,7], frequency = 73, start = beg)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
library(expss)
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd,20)
ts.fd <- ts.fd[,c(1,2,4)]
head(ts.fd,20)
plot(ts.fd)
plot(ts.fd$time,ts.fd$spi)
plot(ts.fd$time,ts.fd$spi, type = 'l')
plot(ts.fd$time,ts.fd$spi, type = 'l')+
line(ts.fd$time,ts.fd$x)
plot(ts.fd$time,ts.fd$spi, type = 'l')+
lines(ts.fd$time,ts.fd$x)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x))
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x), stat = 'identity')
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x), stat = 'identity')
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x), stat = 'identity', col = 'blue')
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x*6-3), stat = 'identity', col = 'blue')
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(~.*x, name="Second Axis")
ggplot(data = ts.fd, aes(x = time))+
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x*6-3), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(~.*x, name="Second Axis")
)
WD <- "C:/Users/pedro/OneDrive/@DOUTORADO/@@TU-Berlin/@Artigos/CAP 4/R"
setwd(WD)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x*6-3), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.*10, name="Second Axis")
)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x*6-3), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.+3, name="Second Axis")
)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x*6-3), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.+3/6, name="Second Axis")
)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x*6-3), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.+3 /6, name="Second Axis")
)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x*6-3), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=(~.+3)/6, name="Second Axis")
)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x*6-3), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.+3, name="Second Axis")
)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.+3, name="Second Axis")
)
ts.fd$x <-ts.fd$x-3
plot(ts.fd$time,ts.fd$spi, type = 'l')+
lines(ts.fd$time,ts.fd$x)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.+3, name="Second Axis")
)
ts.fd$x <-ts.fd$x-3
plot(ts.fd$time,ts.fd$spi, type = 'l')+
lines(ts.fd$time,ts.fd$x)
plot(ts.fd$time,ts.fd$spi, type = 'l')+
lines(ts.fd$time,ts.fd$x)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
ts.fd <- ts(ts.comp[,7], frequency = 73, start = beg)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
library(expss)
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd,20)
ts.fd <- ts.fd[,c(1,2,4)]
ts.fd$x <-ts.fd$x-3
plot(ts.fd$time,ts.fd$spi, type = 'l')+
lines(ts.fd$time,ts.fd$x)
ts.fd$x <-ts.fd$x*6
plot(ts.fd$time,ts.fd$spi, type = 'l')+
lines(ts.fd$time,ts.fd$x)
ts.fd
ts.fd <- ts(ts.comp[,7], frequency = 73, start = beg)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd,20)
ts.fd <- ts.fd[,c(1,2,4)]
ts.fd
a <- ts.fd
ts.fd$x <-ts.fd$x*6 - 3
plot(ts.fd$time,ts.fd$spi, type = 'l')+
lines(ts.fd$time,ts.fd$x)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.+3, name="Second Axis")
)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.3, name="Second Axis")
)
ggplot(data = ts.fd, aes(x = time))+
geom_line(aes(y = spi))+
geom_bar(aes(y = x), stat = 'identity', col = 'blue')+
scale_y_continuous(
# Features of the first axis
name = "First Axis",
# Add a second axis and specify its features
sec.axis = sec_axis(trans=~.*2, name="Second Axis")
)
x=1:10;df=data.frame(x=x,y=x+1,z=x+2)
melt(df)
melt(ts.fd)
ggplot(melt(ts.fd),
aes(x= time,value,color=variable,fill=variable))+
geom_bar(subset=.(variable=="x"),stat="identity")+
geom_line(subset=.(variable=="spi"))
ggplot(melt(ts.fd),
aes(x= time,value,color=variable,fill=variable))+
geom_bar(subset=.(variable=="x"),stat="identity")+
geom_line(subset=.(variable=="spi"))
ggplot(melt(ts.fd),
aes(x= time,value,color=variable,fill=variable))+
geom_bar(subset=ts.fd(variable=="x"),stat="identity")+
geom_line(subset=ts.fd(variable=="spi"))
x <- rep(as.Date('2012-01-01'), 24) + (1:24)*30
ybar <- 1:24
yline <- ybar + 1
df <- data.frame(x=x, ybar=ybar, yline=yline)
df
molten <- melt(df, id.vars='x', measure.vars=c('ybar', 'yline'))
molten
molten$line <- ifelse(molten$variable=='yline', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='ybar', TRUE, FALSE)
molten
df <- data.frame(x=x, ybar=ybar, yline=yline)
molten <- melt(ts.fd, id.vars='time', measure.vars=c('x', 'spi'))
molten$line <- ifelse(molten$variable=='spi', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='x', TRUE, FALSE)
molten
ts.fd <- ts(ts.comp[,7], frequency = 73, start = beg)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd,20)
ts.fd <- ts.fd[,c(1,2,4)]
x <- rep(as.Date('2012-01-01'), 24) + (1:24)*30
ybar <- 1:24
df <- data.frame(x=x, ybar=ybar, yline=yline)
molten <- melt(ts.fd, id.vars='time', measure.vars=c('x', 'spi'))
molten$line <- ifelse(molten$variable=='spi', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='x', TRUE, FALSE)
molten
molten <- melt(ts.fd, id.vars='time', measure.vars=c('x', 'spi'))
molten$line <- ifelse(molten$variable=='spi', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='x', TRUE, FALSE)
molten
### --- subset the data set
df.line  <- subset(molten, line==TRUE)
df.bar   <- subset(molten, bar==TRUE)
### --- plot it
p <- ggplot() +
geom_bar(data=df.bar, mapping=aes(x=x, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=x, y=value, colour=variable)) +
opts(title="Test Plot", legend.position="right")
### --- subset the data set
df.line  <- subset(molten, line==TRUE)
df.bar   <- subset(molten, bar==TRUE)
### --- plot it
p <- ggplot() +
geom_bar(data=df.bar, mapping=aes(x=x, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=x, y=value, colour=variable)) +
opts(title="Test Plot", legend.position="right")
### --- plot it
p <- ggplot() +
geom_bar(data=df.bar, mapping=aes(x=x, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=x, y=value, colour=variable)) +
### --- plot it
p <- ggplot() +
geom_bar(data=df.bar, mapping=aes(x=x, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=x, y=value, colour=variable))
p
### --- plot it
ggplot() +
geom_bar(data=df.bar, mapping=aes(x=x, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=x, y=value, colour=variable))
df.bar
df.line
nrow(df.line)
nrow(df.bar)
df.bar   <- subset(molten, bar==TRUE)
### --- plot it
ggplot() +
geom_bar(data=df.bar, mapping=aes(x=x, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=x, y=value, colour=variable))
rlang::last_error()
### --- plot it
ggplot() +
geom_bar(data=df.bar, mapping=aes(x=time, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=time, y=value, colour=variable))
ts.fd$x <-ts.fd$x -3
molten <- melt(ts.fd, id.vars='time', measure.vars=c('x', 'spi'))
molten$line <- ifelse(molten$variable=='spi', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='x', TRUE, FALSE)
### --- subset the data set
df.line  <- subset(molten, line==TRUE)
df.bar   <- subset(molten, bar==TRUE)
nrow(df.bar)
### --- plot it
ggplot() +
geom_bar(data=df.bar, mapping=aes(x=time, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=time, y=value, colour=variable))
ts.fd <- ts(ts.comp[,7], frequency = 73, start = beg)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd,20)
ts.fd <- ts.fd[,c(1,2,4)]
ts.fd$x <- abs(ts.fd$x  - 1)
molten <- melt(ts.fd, id.vars='time', measure.vars=c('x', 'spi'))
molten$line <- ifelse(molten$variable=='spi', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='x', TRUE, FALSE)
### --- subset the data set
df.line  <- subset(molten, line==TRUE)
df.bar   <- subset(molten, bar==TRUE)
nrow(df.bar)
### --- plot it
ggplot() +
geom_bar(data=df.bar, mapping=aes(x=time, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=time, y=value, colour=variable))
ts.fd$x <- abs(ts.fd$x  - 1) - 3
molten <- melt(ts.fd, id.vars='time', measure.vars=c('x', 'spi'))
molten$line <- ifelse(molten$variable=='spi', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='x', TRUE, FALSE)
### --- subset the data set
df.line  <- subset(molten, line==TRUE)
df.bar   <- subset(molten, bar==TRUE)
ts.fd <- ts(ts.comp[,7], frequency = 73, start = beg)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd,20)
ts.fd <- ts.fd[,c(1,2,4)]
ts.fd$x <- abs(ts.fd$x  - 1) - 3
molten <- melt(ts.fd, id.vars='time', measure.vars=c('x', 'spi'))
molten$line <- ifelse(molten$variable=='spi', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='x', TRUE, FALSE)
### --- subset the data set
df.line  <- subset(molten, line==TRUE)
df.bar   <- subset(molten, bar==TRUE)
nrow(df.bar)
### --- plot it
ggplot() +
geom_bar(data=df.bar, mapping=aes(x=time, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=time, y=value, colour=variable))
# opts(title="Test Plot", legend.position="right")
# ggsave(p, width=5, height=3, filename='plot.png', dpi=150)
### --- plot it
ggplot() +
geom_point(data=df.bar, mapping=aes(x=time, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=time, y=value, colour=variable))
ts.fd <- ts(ts.comp[,7], frequency = 73, start = beg)
ts.spi <- as.data.frame(ts.spi1)
ts.fd <- as.data.frame(ts.fd)
z.spi <- read.zoo(ts.spi, index = 1:2, ts = "")
time.fd <- seq(from = as.Date("1996-01-01"), by = '5 days', length.out = 1387)
time.spi <- seq(from = as.Date("1996-01-15"), by = '1 month', length.out = 228)
ts.spi$time <- time.spi
ts.fd$time <- time.fd
ts.fd <- ts.fd[,c(2,1)]
ts.fd$month <- substr(ts.fd$time,1, 7)
ts.spi$month <- substr(ts.spi$time,1, 7)
ts.fd$spi <- vlookup(ts.fd$month, ts.spi, result_column = 2,lookup_column = 3)
head(ts.fd,20)
ts.fd <- ts.fd[,c(1,2,4)]
# ts.fd$x <- abs(ts.fd$x  - 1) - 3
molten <- melt(ts.fd, id.vars='time', measure.vars=c('x', 'spi'))
molten$line <- ifelse(molten$variable=='spi', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='x', TRUE, FALSE)
### --- subset the data set
df.line  <- subset(molten, line==TRUE)
df.bar   <- subset(molten, bar==TRUE)
nrow(df.bar)
--- plot it
ggplot() +
geom_point(data=df.bar, mapping=aes(x=time, y=value, fill=variable, colour=variable),
stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=time, y=value, colour=variable))
